// Kerbalism v3.14
// MoreHitchhickers
// created: 01 Oct 19
// updated: 03 Oct 19
// updated: 23 Nov 21 - Ve

@PART[crewCabin500t,crewCabin500,crewCabin500f,crewCabin375t,crewCabin375,crewCabin375f,crewCabin250t,crewCabin250f]:NEEDS[KGEx,FeatureComfort]:AFTER[KerbalismDefault]
{
	MODULE
	{
		name = Comfort
		bonus = exercise
		desc = A treadmill designed to permit exercise in zero-g is included. The crew will love it.
	}

	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = Comfort
		title = Treadmill
		repair = Engineer
		mtbf = 36288000
		extra_cost = 0.25
		extra_mass = 0.05
	}

	@tags ^= :$: comfort:
}

@PART[crewCabin1875t,crewCabin1875,crewCabin1875f,crewCabin125t,crewCabin125,crewCabin125xt]:NEEDS[KGEx,FeatureComfort]:AFTER[KerbalismDefault]
{
	MODULE
	{
		name = Comfort
		bonus = exercise
		desc = A collection of semi-used resistance-bands (which oddly resemble rubber-bands often found in offices) designed to permit exercise in zero-g is included. The crew will love it.
	}

	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = Comfort
		title = Treadmill
		repair = Engineer
		mtbf = 36288000
		extra_cost = 0.25
		extra_mass = 0.05
	}

	@tags ^= :$: comfort:
}

@PART[crewCabin1875t,crewCabin1875,crewCabin1875f,crewCabin125t,crewCabin125,crewCabin125xt,crewCabin500,crewCabin500f,crewCabin375t,crewCabin375,crewCabin375f,crewCabin250t,crewCabin250f]:AFTER[KerbalismDefault]
{
	// surface is square of cylinder scale
	%mh_surface_scale = #$rescaleFactor$
	@mh_surface_scale != 2
	// volume is cube of cylinder scale
	%mh_volume_scale  = #$rescaleFactor$
	@mh_volume_scale  != 3
}

@PART[crewCabin1875t,crewCabin1875,crewCabin1875f,crewCabin125t,crewCabin125,crewCabin125xt,crewCabin500,crewCabin500f,crewCabin375t,crewCabin375,crewCabin375f,crewCabin250t,crewCabin250f]:HAS[@MODEL:HAS[#scale]]:AFTER[KerbalismDefault]
{
	// take the first model x and y scale for surface, assume z=x
	@mh_surface_scale *= #$MODEL/scale[0]$
	@mh_surface_scale *= #$MODEL/scale[1]$
	// take all three dimension scales for volume scale
	@mh_volume_scale	*= #$MODEL/scale[0]$
	@mh_volume_scale	*= #$MODEL/scale[1]$
	@mh_volume_scale	*= #$MODEL/scale[2]$
}

// The volume/surface calculation could be reused for other patches, if
// the before/after tags were adjusted.

@PART[crewCabin1875t,crewCabin1875,crewCabin1875f,crewCabin125t,crewCabin125,crewCabin125xt,crewCabin500,crewCabin500f,crewCabin375t,crewCabin375,crewCabin375f,crewCabin250t,crewCabin250f]:AFTER[KerbalismDefault]
{
	@MODULE[Habitat]
	{
		%volume = 9.2
		@volume *= #$../mh_volume_scale$
		%surface = 16.0
		@surface *= #$../mh_surface_scale$
	}
}

@PART[crewCabin1875t,crewCabin1875,crewCabin1875f,crewCabin125t,crewCabin125,crewCabin125xt,crewCabin500,crewCabin500f,crewCabin375t,crewCabin375,crewCabin375f,crewCabin250t,crewCabin250f]:AFTER[KerbalismDefault]
{
	!mh_surface_scale = 0
	!mh_volume_scale = 0
}

// CC BY-NC-SA-4.0
// zer0Kerbal
